function the_figure(t,r,e){if("yield"==$("input[name=figuredisplay]:checked").val()){var a=$("input[name=yearfig]:checked").val(),n=[],l=[],i=[],o=[];switch(a){case"Year3":var c=[],d=[],s=[];n=[i,c,d,s,o],l=[null,"25y3","50y3","75y3","noAction"];break;case"Year5":var f=[],p=[],u=[];n=[i,f,p,u,o],l=[null,"25y5","50y5","75y5","noAction"];break;case"Year10":var y=[],h=[],x=[];n=[i,y,h,x,o],l=[null,"25y10","50y10","75y10","noAction"]}var g=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25];for(var k in t)i[k]={x:k,y:t[k]};var v={top:20,right:35,bottom:30,left:35},m={left:20},b=$("body").width()<960?$("body").width()-v.left-m.left-v.right:960-v.left-m.left-v.right,w=.506*b,A=d3.scale.linear().range([0,b]),Y=d3.scale.linear().range([w,0]),I=d3.svg.axis().scale(A).ticks(5).orient("bottom"),C=d3.svg.axis().scale(Y).orient("left"),D=d3.svg.line().x(function(t){return A(t.x)}).y(function(t){return Y(t.y)}).interpolate("linear"),N=d3.select(".figure-area").append("svg").attr("width",b+v.left+m.left+v.right).attr("height",w+v.top+v.bottom).append("g").attr("transform","translate("+parseInt(v.left+m.left)+","+v.top+")");A.domain(d3.extent(g)),Y.domain(d3.extent(i,function(t){return t.y})),N.append("g").attr("class","x axis").attr("transform","translate(0,"+w+")").call(I),N.append("g").attr("class","y axis").call(C).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Yield (Tons/Acre)"),N.append("path").attr("d",D(i)).attr("class","line").attr("stroke","blue").attr("stroke-width",2).attr("fill","none"),console.log(i),N.selectAll("dot").data(i).enter().append("circle").attr("r",3.5).attr("fill","blue").attr("cx",function(t){return A(t.x)}).attr("cy",function(t){return Y(t.y)}),l[1]&&d3.tsv("yield-rates.tsv",function(r){for(var e in t)n[4][e]={x:e,y:t[e]*r[e][l[4]]/100};N.append("path").attr("d",D(n[4])).attr("class","line").attr("stroke","red").attr("stroke-width",2).attr("fill","none"),N.selectAll("dot").data(n[4]).enter().append("circle").attr("r",3.5).attr("fill","red").attr("cx",function(t){return A(t.x)}).attr("cy",function(t){return Y(t.y)});for(var e in t)n[1][e]={x:e,y:t[e]*r[e][l[1]]/100};N.append("path").attr("d",D(n[1])).attr("class","line").attr("stroke","yellowgreen").attr("stroke-width",2).attr("fill","none"),N.selectAll("dot").data(n[1]).enter().append("circle").attr("r",3.5).attr("fill","yellowgreen").attr("cx",function(t){return A(t.x)}).attr("cy",function(t){return Y(t.y)});for(var e in t)n[2][e]={x:e,y:t[e]*r[e][l[2]]/100};N.append("path").attr("d",D(n[2])).attr("class","line").attr("stroke","darkorchid").attr("stroke-width",2).attr("fill","none"),N.selectAll("dot").data(n[2]).enter().append("circle").attr("r",3.5).attr("fill","darkorchid").attr("cx",function(t){return A(t.x)}).attr("cy",function(t){return Y(t.y)});for(var e in t)n[3][e]={x:e,y:t[e]*r[e][l[3]]/100};N.append("path").attr("d",D(n[3])).attr("class","line").attr("stroke","lightskyblue").attr("stroke-width",2).attr("fill","none"),N.selectAll("dot").data(n[3]).enter().append("circle").attr("r",3.5).attr("fill","lightskyblue").attr("cx",function(t){return A(t.x)}).attr("cy",function(t){return Y(t.y)})})}else if("netreturns"==$("input[name=figuredisplay]:checked").val()){var R=$("input[name=yearfig]:checked").val(),n=[],l=[],i=[],T=[];switch(R){case"Year3":var c=[],d=[],s=[];n=[i,c,d,s,T],l=[null,"25y3","50y3","75y3","noAction"];break;case"Year5":var f=[],p=[],u=[];n=[i,f,p,u,T],l=[null,"25y5","50y5","75y5","noAction"];break;case"Year10":var y=[],h=[],x=[];n=[i,y,h,x,T],l=[null,"25y10","50y10","75y10","noAction"]}var g=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],v={top:20,right:35,bottom:30,left:35},m={left:20};b=$("body").width()<960?$("body").width()-v.left-m.left-v.right:960-v.left-m.left-v.right,w=.506*b;var A=d3.scale.linear().range([0,b]),Y=d3.scale.linear().range([w,0]),I=d3.svg.axis().scale(A).ticks(5).orient("bottom"),C=d3.svg.axis().scale(Y).orient("left"),D=d3.svg.line().x(function(t){return A(t.x)}).y(function(t){return Y(t.y)}).interpolate("linear"),N=d3.select(".figure-area").append("svg").attr("width",b+v.left+m.left+v.right).attr("height",w+v.top+v.bottom).append("g").attr("transform","translate("+parseInt(v.left+m.left)+","+v.top+")");for(var k in t)i[k]={x:k,y:e.healthy[k]};A.domain(d3.extent(g)),Y.domain(d3.extent(i,function(t){return t.y})),N.append("g").attr("class","x axis").attr("transform","translate(0,"+w+")").call(I),N.append("g").attr("class","y axis").call(C).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Cumulative Discounted Net Returns (2013 dollars)"),N.append("path").attr("d",D(i)).attr("class","line").attr("stroke","blue").attr("stroke-width",2).attr("fill","none"),N.selectAll("dot").data(i).enter().append("circle").attr("r",3.5).attr("fill","blue").attr("cx",function(t){return A(t.x)}).attr("cy",function(t){return Y(t.y)});for(var k in t)T[k]={x:k,y:e.untreated[k]};N.append("path").attr("d",D(T)).attr("class","line").attr("stroke","red").attr("stroke-width",2).attr("fill","none"),N.selectAll("dot").data(T).enter().append("circle").attr("r",3.5).attr("fill","red").attr("cx",function(t){return A(t.x)}).attr("cy",function(t){return Y(t.y)}),l[1]&&(N.append("path").attr("d",D(e[l[1]])).attr("class","line").attr("stroke","yellowgreen").attr("stroke-width",2).attr("fill","none"),N.selectAll("dot").data(e[l[1]]).enter().append("circle").attr("r",3.5).attr("fill","yellowgreen").attr("cx",function(t){return A(t.x)}).attr("cy",function(t){return Y(t.y)}),N.append("path").attr("d",D(e[l[2]])).attr("class","line").attr("stroke","darkorchid").attr("stroke-width",2).attr("fill","none"),N.selectAll("dot").data(e[l[2]]).enter().append("circle").attr("r",3.5).attr("fill","darkorchid").attr("cx",function(t){return A(t.x)}).attr("cy",function(t){return Y(t.y)}),N.append("path").attr("d",D(e[l[3]])).attr("class","line").attr("stroke","lightskyblue").attr("stroke-width",2).attr("fill","none"),N.selectAll("dot").data(e[l[3]]).enter().append("circle").attr("r",3.5).attr("fill","lightskyblue").attr("cx",function(t){return A(t.x)}).attr("cy",function(t){return Y(t.y)}))}}function type(t){return t.x=+t.x,t.y=+t.y,t}