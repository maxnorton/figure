function the_table(e,t,a,r,s,n,d,l,h,y,o,i,p){d3.tsv("yield-rates.tsv",function(f){var v,c,I,u,b,Y,k,m,w,D,g,C,F,E,N=new Array,j={healthy:null,untreated:null,"25y3":0,"50y3":0,"75y3":0,"25y5":0,"50y5":0,"75y5":0,"25y10":0,"50y10":0,"75y10":0},x={healthy:null,untreated:null,"25y3":0,"50y3":0,"75y3":0,"25y5":0,"50y5":0,"75y5":0,"25y10":0,"50y10":0,"75y10":0},A={healthy:0,untreated:1,"25y3":0,"50y3":0,"75y3":0,"25y5":0,"50y5":0,"75y5":0,"25y10":0,"50y10":0,"75y10":0},R={healthy:"Healthy, untreated",untreated:"Infected, untreated","25y3":"25% DCE treatment adopted year 3","25y5":"25% DCE treatment adopted year 5","25y10":"25% DCE treatment adopted year 10","50y3":"50% DCE treatment adopted year 3","50y5":"50% DCE treatment adopted year 5","50y10":"50% DCE treatment adopted year 10","75y3":"75% DCE treatment adopted year 3","75y5":"75% DCE treatment adopted year 5","75y10":"75% DCE treatment adopted year 10"},O=Object.keys(R),M=new Object,T=new Object,B=1/(1+e/100);healthyYields=[parseInt(l),parseInt(h),parseInt(y),parseInt(o),parseInt(i),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p)],M[0]={healthyYields:healthyYields},untreatedYields=[];for(var K in healthyYields)untreatedYields[K]=healthyYields[K]*f[K].noAction/100;M[1]={untreatedYields:untreatedYields},costs=[t,a,r,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s];var P=[];for(var K in untreatedYields)P[K]=d*untreatedYields[K]-costs[K];var _=[];for(var K in P){var H=Math.pow(B,K);_[K]=P[K]*H}for(var L=[_[0]],K=1;K<_.length;K++)L[K]=_[K]+L[K-1];T[1]={untreatedCDNR:L};for(var S=[d*healthyYields[0]-costs[0]],U="-",K=1;K<healthyYields.length;K++){var H=Math.pow(B,K);S[K]=(d*healthyYields[K]-costs[K])*H+S[parseInt(K-1)],S[K]>S[parseInt(K-1)]&&(U=K)}var q=S[25]-L[25];q=0>q?"-$"+parseFloat(-1*q).toFixed(2):"$"+parseFloat(q).toFixed(2);var z=-1;for(var K in S)if(S[K+1]>0){z=K;break}-1==z&&(z="Never breaks even",U="-"),v=[];for(var K in S)v[K]=S[K]-L[K];for(var G=0;_[G]<0&&25>G;)G++;if(25==G)G="Untreated vineyard never profitable";else{for(;_[G]>0&&25>G;)G++;G-=1}var J='<hr /><h2>Results</h2><section class="figure-area"></section><h3>Output table</h3><table><thead><th><h4>Scenario</h4></th><th><h4>ACDNB</h4></th><th><h4>Breakeven age</h4></th><th><h4>Last profitable year</h4></th><th><h4>Breakeven probability</h4></th></thead><tbody>';J+="<tr><td>"+R.healthy+"</td><td>"+q+"</td><td>"+z+"</td><td>"+U+"</td><td>0</td></tr>",J+="<tr><td>"+R.untreated+"</td><td>-</td><td>-</td><td>"+G+"</td><td>1</td></tr>";for(var Q=2;Q<O.length;Q++){for(var V=O[Q],W=parseInt(V.substr(3)),X=[],Z=0;W>Z;Z++)X[Z]=0;for(var Z=W;26>Z;Z++)X[Z]=n;var ee=[];for(var K in healthyYields)ee[K]=d*healthyYields[K]-costs[K]-X[K];var te=[];for(var K in ee){var H=Math.pow(B,K);te[K]=ee[K]*H}for(var ae=[te[0]],K=1;K<te.length;K++)ae[K]=te[K]+ae[K-1];T[0]={healthyCDNR:ae},g=[];for(var K in healthyYields)g[K]=healthyYields[K]*f[K][V]/100;var re=O[Q];M[Q]={thisKey:g},C=[];for(var K in g)C[K]=d*g[K]-costs[K]-X[K];F=[];for(var K in C){var H=Math.pow(B,K);F[K]=C[K]*H}E=[F[0]];for(var K=1;K<F.length;K++)E[K]=F[K]+E[K-1];T[Q]={thisKey:E},N=[parseInt(X[0])];for(var K=1;K<te.length;K++)N[K]=parseInt(X[K])+parseInt(N[K-1]);var se=[];for(var K in E)se[K]=E[K]-L[K];switch(V){case"25y3":c=se;break;case"25y5":I=se;break;case"25y10":u=se;break;case"50y3":b=se;break;case"50y5":Y=se;break;case"50y10":k=se;break;case"75y3":m=se;break;case"75y5":w=se;break;case"75y10":D=se}for(var K in E)if(E[K]>L[K]){j[V]=K;break}for(0==j[V]&&E[0]<=L[0]&&(j[V]="Never breaks even"),x[V]=V.substr(3);C[parseInt(x[V])+1]<=0&&parseInt(x[V])<25;)x[V]++;if(25==parseInt(x[V]))x[V]="Treatment never profitable";else for(;C[parseInt(x[V])+1]>0&&parseInt(x[V])<25;)x[V]++;A[V]=(S[25]-ae[25])/(E[25]-ae[25]-(L[25]-S[25])),A[V]>1&&(A[V]=1),A[V]=A[V].toFixed(3);var ne=null!=se[25]?se[25].toFixed(2):"-";"-"!=ne&&0>ne?ne="-$"+parseFloat(-1*ne).toFixed(2):"-"!=ne&&(ne="$"+parseFloat(ne).toFixed(2)),J+="<tr><td>"+R[V]+"</td><td>"+ne+"</td><td>"+j[V]+"</td><td>"+x[V]+"</td><td>"+A[V]+"</td></tr>"}J+='</tbody></table><p class="print-link"><a href="javascript:window.print()"><i class="fa fa-print" aria-hidden="true"></i> Print these results.</a></p><p class="adjust-link"><a href="#form" onclick="$(\'body,html\').stop(true,true).animate({scrollTop: $(\'#form\').offset().top - $(\'header\').height()}, \'500\', \'swing\');">Adjust parameters</a></p>',$(".results").html(J),the_figure(healthyYields,M,T),$("body,html").stop(!0,!0).animate({scrollTop:$("#results").offset().top-$("header").height()},"500","swing")})}var t,a,eff,discount,cost0,cost1,cost2,cost3,pc,price,yield0,yield1,yield2,yield3,yield4,treatedCDNR,treatedDNR,treatedNR,treatedYields=new Array,costs,pcFtnOfT,isProfitable=new Array;