function the_table(t,e,a,r,n,s,o,d,y,p,h,l,i){d3.tsv("yield-rates.tsv",function(v){var f=[],I=[],c=[],u=[],b=[],k=[],m=[],g=[],x=[],C=[],D=[],F={},w={},E=[],j=[],M=[],A=[];console.log(w);var B={healthy:null,untreated:null,"25y3":0,"50y3":0,"75y3":0,"25y5":0,"50y5":0,"75y5":0,"25y10":0,"50y10":0,"75y10":0},N={healthy:null,untreated:null,"25y3":0,"50y3":0,"75y3":0,"25y5":0,"50y5":0,"75y5":0,"25y10":0,"50y10":0,"75y10":0},T={healthy:0,untreated:1,"25y3":0,"50y3":0,"75y3":0,"25y5":0,"50y5":0,"75y5":0,"25y10":0,"50y10":0,"75y10":0},O={healthy:"Healthy, untreated",untreated:"Infected, untreated","25y3":"25% DCE treatment adopted year 3","25y5":"25% DCE treatment adopted year 5","25y10":"25% DCE treatment adopted year 10","50y3":"50% DCE treatment adopted year 3","50y5":"50% DCE treatment adopted year 5","50y10":"50% DCE treatment adopted year 10","75y3":"75% DCE treatment adopted year 3","75y5":"75% DCE treatment adopted year 5","75y10":"75% DCE treatment adopted year 10"},_=Object.keys(O);w.healthy=[],w.untreated=[],F.healthy=[],F.untreated=[],console.log(w);var H=1/(1+t/100),L=[parseInt(d),parseInt(y),parseInt(p),parseInt(h),parseInt(l),parseInt(i),parseInt(i),parseInt(i),parseInt(i),parseInt(i),parseInt(i),parseInt(i),parseInt(i),parseInt(i),parseInt(i),parseInt(i),parseInt(i),parseInt(i),parseInt(i),parseInt(i),parseInt(i),parseInt(i),parseInt(i),parseInt(i),parseInt(i),parseInt(i)],P=[];for(var R in L)P[R]=L[R]*v[R].noAction/100,w.healthy[R]={x:R,y:L[R]},w.untreated[R]={x:R,y:P[R]};costs=[e,a,r,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n];var S=[];for(var R in P)S[R]=o*P[R]-costs[R];var U=[];for(var R in S){var q=Math.pow(H,R);U[R]=S[R]*q}for(var z=[U[0]],R=1;R<U.length;R++)z[R]=U[R]+z[R-1];for(var G=[o*L[0]-costs[0]],J="-",R=1;R<L.length;R++){var q=Math.pow(H,R);G[R]=(o*L[R]-costs[R])*q+G[parseInt(R-1)],G[R]>G[parseInt(R-1)]&&(J=R)}var K=G[25]-z[25];K=0>K?"-$"+parseFloat(-1*K).toFixed(2):"$"+parseFloat(K).toFixed(2);var Q=-1;for(var R in G)if(G[R+1]>0){Q=R;break}-1==Q&&(Q="Never breaks even",J="-"),D=[];for(var R in G)D[R]=G[R]-z[R];for(var V=0;U[V]<0&&25>V;)V++;if(25==V)V="Untreated vineyard never profitable";else{for(;U[V]>0&&25>V;)V++;V-=1}var W='<hr /><h2>Results</h2><section class="figure-area"></section><h3>Output table</h3><table><thead><th><h4>Scenario</h4></th><th><h4>ACDNB</h4></th><th><h4>Breakeven age</h4></th><th><h4>Last profitable year</h4></th><th><h4>Breakeven probability</h4></th></thead><tbody>';W+="<tr><td>"+O.healthy+"</td><td>"+K+"</td><td>"+Q+"</td><td>"+J+"</td><td>0</td></tr>",W+="<tr><td>"+O.untreated+"</td><td>-</td><td>-</td><td>"+V+"</td><td>1</td></tr>";for(var X=2;X<_.length;X++){for(var Y=_[X],Z=parseInt(Y.substr(3)),tt=[],et=0;Z>et;et++)tt[et]=0;for(var et=Z;26>et;et++)tt[et]=s;var at=[];for(var R in L)at[R]=o*L[R]-costs[R]-tt[R];var rt=[];for(var R in at){var q=Math.pow(H,R);rt[R]=at[R]*q}for(var nt=[rt[0]],R=1;R<rt.length;R++)nt[R]=rt[R]+nt[R-1];for(var R in nt)F.healthy[R]={x:R,y:nt[R]},F.untreated[R]={x:R,y:z[R]};E=[];for(var R in L)E[R]=L[R]*v[R][Y]/100;var st=_[X];w[st]=[];for(var R in L)w[st][R]={x:R,y:E[R]};j=[];for(var R in E)j[R]=o*E[R]-costs[R]-tt[R];M=[];for(var R in j){var q=Math.pow(H,R);M[R]=j[R]*q}A=[M[0]];for(var R=1;R<M.length;R++)A[R]=M[R]+A[R-1];F[st]=[];for(var R in L)F[st][R]={x:R,y:A[R]};C=[parseInt(tt[0])];for(var R=1;R<rt.length;R++)C[R]=parseInt(tt[R])+parseInt(C[R-1]);var ot=[];for(var R in A)ot[R]=A[R]-z[R];switch(Y){case"25y3":f=ot;break;case"25y5":I=ot;break;case"25y10":c=ot;break;case"50y3":u=ot;break;case"50y5":b=ot;break;case"50y10":k=ot;break;case"75y3":m=ot;break;case"75y5":g=ot;break;case"75y10":x=ot}for(var R in A)if(A[R]>z[R]){B[Y]=R;break}for(0==B[Y]&&A[0]<=z[0]&&(B[Y]="Never breaks even"),N[Y]=Y.substr(3);j[parseInt(N[Y])+1]<=0&&parseInt(N[Y])<25;)N[Y]++;if(25==parseInt(N[Y]))N[Y]="Treatment never profitable";else for(;j[parseInt(N[Y])+1]>0&&parseInt(N[Y])<25;)N[Y]++;T[Y]=(G[25]-nt[25])/(A[25]-nt[25]-(z[25]-G[25])),T[Y]>1&&(T[Y]=1),T[Y]=T[Y].toFixed(3);var dt=null!=ot[25]?ot[25].toFixed(2):"-";"-"!=dt&&0>dt?dt="-$"+parseFloat(-1*dt).toFixed(2):"-"!=dt&&(dt="$"+parseFloat(dt).toFixed(2)),W+="<tr><td>"+O[Y]+"</td><td>"+dt+"</td><td>"+B[Y]+"</td><td>"+N[Y]+"</td><td>"+T[Y]+"</td></tr>"}W+='</tbody></table><p class="print-link"><a href="javascript:window.print()"><i class="fa fa-print" aria-hidden="true"></i> Print these results.</a></p><p class="adjust-link"><a href="#form" onclick="$(\'body,html\').stop(true,true).animate({scrollTop: $(\'#form\').offset().top - $(\'header\').height()}, \'500\', \'swing\');">Adjust parameters</a></p>',$(".results").html(W),the_figure(w,F),$("body,html").stop(!0,!0).animate({scrollTop:$("#results").offset().top-$("header").height()},"500","swing")})}