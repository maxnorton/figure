function the_table(e,t,a,r,s,n,d,h,y,l,o,i,p){d3.tsv("yield-rates.tsv",function(v){var f,u,I,c,b,Y,k,m,g,w,x,C,D,F,E=new Array,j={healthy:null,untreated:null,"25y3":0,"50y3":0,"75y3":0,"25y5":0,"50y5":0,"75y5":0,"25y10":0,"50y10":0,"75y10":0},A={healthy:null,untreated:null,"25y3":0,"50y3":0,"75y3":0,"25y5":0,"50y5":0,"75y5":0,"25y10":0,"50y10":0,"75y10":0},M={healthy:0,untreated:1,"25y3":0,"50y3":0,"75y3":0,"25y5":0,"50y5":0,"75y5":0,"25y10":0,"50y10":0,"75y10":0},O={healthy:"Healthy, untreated",untreated:"Infected, untreated","25y3":"25% DCE treatment adopted year 3","25y5":"25% DCE treatment adopted year 5","25y10":"25% DCE treatment adopted year 10","50y3":"50% DCE treatment adopted year 3","50y5":"50% DCE treatment adopted year 5","50y10":"50% DCE treatment adopted year 10","75y3":"75% DCE treatment adopted year 3","75y5":"75% DCE treatment adopted year 5","75y10":"75% DCE treatment adopted year 10"},B=Object.keys(O),N=new Object,T=new Object;N.healthy=[],N.untreated=[],T.healthy=[],T.untreated=[];var _=1/(1+e/100);healthyYields=[parseInt(h),parseInt(y),parseInt(l),parseInt(o),parseInt(i),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p)],untreatedYields=[];for(var H in healthyYields)untreatedYields[H]=healthyYields[H]*v[H].noAction/100;for(var H in healthyYields)N.healthy[H]={x:H,y:healthyYields[H]},N.untreated[H]={x:H,y:untreatedYields[H]};costs=[t,a,r,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s];var L=[];for(var H in untreatedYields)L[H]=d*untreatedYields[H]-costs[H];var P=[];for(var H in L){var R=Math.pow(_,H);P[H]=L[H]*R}for(var S=[P[0]],H=1;H<P.length;H++)S[H]=P[H]+S[H-1];for(var U=[d*healthyYields[0]-costs[0]],q="-",H=1;H<healthyYields.length;H++){var R=Math.pow(_,H);U[H]=(d*healthyYields[H]-costs[H])*R+U[parseInt(H-1)],U[H]>U[parseInt(H-1)]&&(q=H)}var z=U[25]-S[25];z=0>z?"-$"+parseFloat(-1*z).toFixed(2):"$"+parseFloat(z).toFixed(2);var G=-1;for(var H in U)if(U[H+1]>0){G=H;break}-1==G&&(G="Never breaks even",q="-"),f=[];for(var H in U)f[H]=U[H]-S[H];for(var J=0;P[J]<0&&25>J;)J++;if(25==J)J="Untreated vineyard never profitable";else{for(;P[J]>0&&25>J;)J++;J-=1}var K='<hr /><h2>Results</h2><section class="figure-area"></section><h3>Output table</h3><table><thead><th><h4>Scenario</h4></th><th><h4>ACDNB</h4></th><th><h4>Breakeven age</h4></th><th><h4>Last profitable year</h4></th><th><h4>Breakeven probability</h4></th></thead><tbody>';K+="<tr><td>"+O.healthy+"</td><td>"+z+"</td><td>"+G+"</td><td>"+q+"</td><td>0</td></tr>",K+="<tr><td>"+O.untreated+"</td><td>-</td><td>-</td><td>"+J+"</td><td>1</td></tr>";for(var Q=2;Q<B.length;Q++){for(var V=B[Q],W=parseInt(V.substr(3)),X=[],Z=0;W>Z;Z++)X[Z]=0;for(var Z=W;26>Z;Z++)X[Z]=n;var ee=[];for(var H in healthyYields)ee[H]=d*healthyYields[H]-costs[H]-X[H];var te=[];for(var H in ee){var R=Math.pow(_,H);te[H]=ee[H]*R}for(var ae=[te[0]],H=1;H<te.length;H++)ae[H]=te[H]+ae[H-1];for(var H in ae)T.healthy[H]={x:H,y:ae[H]},T.untreated[H]={x:H,y:S[H]};x=[];for(var H in healthyYields)x[H]=healthyYields[H]*v[H][V]/100;var re=B[Q];N[re]=[];for(var H in healthyYields)N[re][H]={x:H,y:x[H]};C=[];for(var H in x)C[H]=d*x[H]-costs[H]-X[H];D=[];for(var H in C){var R=Math.pow(_,H);D[H]=C[H]*R}F=[D[0]];for(var H=1;H<D.length;H++)F[H]=D[H]+F[H-1];T[re]=[];for(var H in healthyYields)T[re][H]={x:H,y:F[H]};E=[parseInt(X[0])];for(var H=1;H<te.length;H++)E[H]=parseInt(X[H])+parseInt(E[H-1]);var se=[];for(var H in F)se[H]=F[H]-S[H];switch(V){case"25y3":u=se;break;case"25y5":I=se;break;case"25y10":c=se;break;case"50y3":b=se;break;case"50y5":Y=se;break;case"50y10":k=se;break;case"75y3":m=se;break;case"75y5":g=se;break;case"75y10":w=se}for(var H in F)if(F[H]>S[H]){j[V]=H;break}for(0==j[V]&&F[0]<=S[0]&&(j[V]="Never breaks even"),A[V]=V.substr(3);C[parseInt(A[V])+1]<=0&&parseInt(A[V])<25;)A[V]++;if(25==parseInt(A[V]))A[V]="Treatment never profitable";else for(;C[parseInt(A[V])+1]>0&&parseInt(A[V])<25;)A[V]++;M[V]=(U[25]-ae[25])/(F[25]-ae[25]-(S[25]-U[25])),M[V]>1&&(M[V]=1),M[V]=M[V].toFixed(3);var ne=null!=se[25]?se[25].toFixed(2):"-";"-"!=ne&&0>ne?ne="-$"+parseFloat(-1*ne).toFixed(2):"-"!=ne&&(ne="$"+parseFloat(ne).toFixed(2)),K+="<tr><td>"+O[V]+"</td><td>"+ne+"</td><td>"+j[V]+"</td><td>"+A[V]+"</td><td>"+M[V]+"</td></tr>"}K+='</tbody></table><p class="print-link"><a href="javascript:window.print()"><i class="fa fa-print" aria-hidden="true"></i> Print these results.</a></p><p class="adjust-link"><a href="#form" onclick="$(\'body,html\').stop(true,true).animate({scrollTop: $(\'#form\').offset().top - $(\'header\').height()}, \'500\', \'swing\');">Adjust parameters</a></p>',$(".results").html(K),the_figure(N,T),$("body,html").stop(!0,!0).animate({scrollTop:$("#results").offset().top-$("header").height()},"500","swing")})}