function the_table(t,e,a,r,s,n,d,y,o,l,h,i,p){d3.tsv("yield-rates.tsv",function(f){var v,c,I,u,b,k,m,Y,g,w,D,C,F,E,x=new Array,A={healthy:null,untreated:null,"25y3":0,"50y3":0,"75y3":0,"25y5":0,"50y5":0,"75y5":0,"25y10":0,"50y10":0,"75y10":0},N={healthy:null,untreated:null,"25y3":0,"50y3":0,"75y3":0,"25y5":0,"50y5":0,"75y5":0,"25y10":0,"50y10":0,"75y10":0},j={healthy:0,untreated:1,"25y3":0,"50y3":0,"75y3":0,"25y5":0,"50y5":0,"75y5":0,"25y10":0,"50y10":0,"75y10":0},M={healthy:"Healthy, untreated",untreated:"Infected, untreated","25y3":"25% DCE treatment adopted year 3","25y5":"25% DCE treatment adopted year 5","25y10":"25% DCE treatment adopted year 10","50y3":"50% DCE treatment adopted year 3","50y5":"50% DCE treatment adopted year 5","50y10":"50% DCE treatment adopted year 10","75y3":"75% DCE treatment adopted year 3","75y5":"75% DCE treatment adopted year 5","75y10":"75% DCE treatment adopted year 10"},R=Object.keys(M),T=1/(1+t/100);healthyYields=[parseInt(y),parseInt(o),parseInt(l),parseInt(h),parseInt(i),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p),parseInt(p)],untreatedYields=[];for(var B in healthyYields)untreatedYields[B]=healthyYields[B]*f[B].noAction/100;costs=[e,a,r,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s];var O=[];for(var B in untreatedYields)O[B]=d*untreatedYields[B]-costs[B];var P=[];for(var B in O){var _=Math.pow(T,B);P[B]=O[B]*_}for(var H=[P[0]],B=1;B<P.length;B++)H[B]=P[B]+H[B-1];for(var L=[d*healthyYields[0]-costs[0]],S="-",B=1;B<healthyYields.length;B++){var _=Math.pow(T,B);L[B]=(d*healthyYields[B]-costs[B])*_+L[parseInt(B-1)],L[B]>L[parseInt(B-1)]&&(S=B)}var U=L[25]-H[25];U=0>U?"-$"+parseFloat(-1*U).toFixed(2):"$"+parseFloat(U).toFixed(2);var q=-1;for(var B in L)if(L[B+1]>0){q=B;break}-1==q&&(q="Never breaks even",S="-"),v=[];for(var B in L)v[B]=L[B]-H[B];for(var z=0;P[z]<0&&25>z;)z++;if(25==z)z="Untreated vineyard never profitable";else{for(;P[z]>0&&25>z;)z++;z-=1}var G="<hr /><h2>Results</h2><table><thead><th><h4>Scenario</h4></th><th><h4>ACDNB</h4></th><th><h4>Breakeven age</h4></th><th><h4>Last profitable year</h4></th><th><h4>Breakeven probability</h4></th></thead><tbody>";G+="<tr><td>"+M.healthy+"</td><td>"+U+"</td><td>"+q+"</td><td>"+S+"</td><td>0</td></tr>",G+="<tr><td>"+M.untreated+"</td><td>-</td><td>-</td><td>"+z+"</td><td>1</td></tr>";for(var J=2;J<R.length;J++){for(var K=R[J],Q=parseInt(K.substr(3)),V=[],W=0;Q>W;W++)V[W]=0;for(var W=Q;26>W;W++)V[W]=n;var X=[];for(var B in healthyYields)X[B]=d*healthyYields[B]-costs[B]-V[B];var Z=[];for(var B in X){var _=Math.pow(T,B);Z[B]=X[B]*_}for(var tt=[Z[0]],B=1;B<Z.length;B++)tt[B]=Z[B]+tt[B-1];D=[];for(var B in healthyYields)D[B]=healthyYields[B]*f[B][K]/100;C=[];for(var B in D)C[B]=d*D[B]-costs[B]-V[B];F=[];for(var B in C){var _=Math.pow(T,B);F[B]=C[B]*_}E=[F[0]];for(var B=1;B<F.length;B++)E[B]=F[B]+E[B-1];x=[parseInt(V[0])];for(var B=1;B<Z.length;B++)x[B]=parseInt(V[B])+parseInt(x[B-1]);var et=[];for(var B in E)et[B]=E[B]-H[B];switch(K){case"25y3":c=et;break;case"25y5":I=et;break;case"25y10":u=et;break;case"50y3":b=et;break;case"50y5":k=et;break;case"50y10":m=et;break;case"75y3":Y=et;break;case"75y5":g=et;break;case"75y10":w=et}for(var B in E)if(E[B]>H[B]){A[K]=B;break}for(0==A[K]&&E[0]<=H[0]&&(A[K]="Never breaks even"),N[K]=K.substr(3);C[parseInt(N[K])+1]<=0&&parseInt(N[K])<25;)N[K]++;if(25==parseInt(N[K]))N[K]="Treatment never profitable";else for(;C[parseInt(N[K])+1]>0&&parseInt(N[K])<25;)N[K]++;j[K]=(L[25]-tt[25])/(E[25]-tt[25]-(H[25]-L[25])),j[K]>1&&(j[K]=1),j[K]=j[K].toFixed(3);var at=null!=et[25]?et[25].toFixed(2):"-";"-"!=at&&0>at?at="-$"+parseFloat(-1*at).toFixed(2):"-"!=at&&(at="$"+parseFloat(at).toFixed(2)),G+="<tr><td>"+M[K]+"</td><td>"+at+"</td><td>"+A[K]+"</td><td>"+N[K]+"</td><td>"+j[K]+"</td></tr>"}G+='</tbody></table><p class="print-link"><a href="javascript:window.print()"><i class="fa fa-print" aria-hidden="true"></i> Print these results.</a></p><p class="adjust-link"><a href="#form" onclick="$(\'body,html\').stop(true,true).animate({scrollTop: $(\'#form\').offset().top - $(\'header\').height()}, \'500\', \'swing\');">Adjust parameters</a></p>',$(".results").html(G),$("body,html").stop(!0,!0).animate({scrollTop:$("#results").offset().top-$("header").height()},"500","swing"),the_figure(healthyYields)})}var t,a,eff,discount,cost0,cost1,cost2,cost3,pc,price,yield0,yield1,yield2,yield3,yield4,treatedCDNR,treatedDNR,treatedNR,treatedYields=new Array,costs,pcFtnOfT,isProfitable=new Array;